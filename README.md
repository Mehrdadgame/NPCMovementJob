# 🧠 شبیه‌سازی جمعیت با Unity DOTS (ECS + Job + Burst)

این پروژه یک شبیه‌ساز جمعیت است که با هدف بررسی عملکرد و معماری **Data-Oriented Technology Stack (DOTS)** یونیتی طراحی شده است.  
هدف اصلی، ایجاد سیستمی است که بتواند **صدها NPC را به صورت همزمان در یک محیط شهری شبیه‌سازی کند** به‌طوری که:
- مسیر مشخصی را طی کنند  
- از برخورد با یکدیگر یا موانع جلوگیری کنند  
- نرخ فریم پایدار در حجم بالا حفظ شود  

> **وضعیت**: پروژه در حال توسعه است. برخی سیستم‌ها مانند دنبال کردن مسیر (Path Following) در مراحل نهایی‌سازی هستند.

---

## 🎯 چرا این ساختار انتخاب شد؟

برای دستیابی به عملکرد بالا و معماری قابل توسعه، از ترکیب موارد زیر استفاده شده است:
- **Entity Component System (ECS)**: جداسازی داده از منطق، تسهیل در تست و توسعه  
- **Job System + Burst**: استفاده کامل از توان پردازشی CPU با موازی‌سازی  
- **Component-Based Design**: افزودن رفتارهای جدید بدون دستکاری سیستم‌های قبلی  

---



---

## ⚙️ سیستم‌های پیاده‌سازی شده

- ✅ `CrowdSpawnerSystem`: ایجاد و پیکربندی اولیه NPCها  
- ✅ `MovementSystem`: اعمال سرعت و موقعیت جدید  
- ✅ `AvoidanceSystem`: دور شدن از سایر NPCها  
- 🔄 `PathFollowingSystem`: هدایت به سمت Waypoint (در حال توسعه)  
- 🔄 `ObstacleAvoidanceSystem`: جلوگیری از برخورد با موانع (در حال توسعه)  

---

## ⚡ بهینه‌سازی‌ها

- تمام پردازش‌ها با **Job System + Burst** انجام می‌شوند  
- حرکت در محور X/Z برای سادگی در فیزیک و دید از بالا  
- استفاده از `BlobAssetReference` برای مسیرها جهت کاهش حافظه و GC  

---

## 🧠 اصول طراحی

- **ماژولار**: هر سیستم مستقل و قابل گسترش است  
- **تست‌پذیر**: داده‌ها و منطق جدا هستند  
- **کارایی محور**: استفاده از SIMD، multithread و memory-friendly data  
- **قابل تنظیم توسط طراح**: از Authoring Components برای تعریف داده‌ها استفاده شده  

---

## 🛠 نحوه اجرا

1. صحنه `CrowdSimulationDemo` را در Unity باز کنید  
2. Play را بزنید — سیستم شروع به شبیه‌سازی NPCها می‌کند  
3. با تنظیم `CrowdSpawnerAuthoring` در Inspector، رفتار و تعداد NPCها را تغییر دهید  

---

## 📝 یادداشت

این پروژه همچنان در حال توسعه است. برخی بخش‌ها مانند مسیر‌یابی پیشرفته در فاز بعدی اضافه خواهند شد.

---

**تهیه و توسعه توسط:** [نام شما]  

